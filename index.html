<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Solana &gt; Ethereum Flippening</title>
  <meta property="og:title" content="Solana &gt; Ethereum" />
  <meta property="og:description" content="Track Solana flipping Ethereum here" />
  <meta property="og:image" content="https://raw.githubusercontent.com/cryptocurb/solanaoverethereum/main/assets/sol2.png" />

  <!-- UMD build exposes a global `Chart` object -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    /* ─────  layout  ───── */
    body{
      margin:0;
      font-family:sans-serif;
      background:linear-gradient(135deg,#9945FF,#14F195);
      color:#fff;
      text-align:center;
      overflow-x:hidden;          /* ← prevents sideways scrolling */
      display:flex;
      flex-direction:column;
      align-items:center;         /* keep everything centred horizontally */
      justify-content:flex-start; /* regular vertical flow */
      min-height:100vh;
      padding-bottom:100px;
    }

    /* ─────  headline & stats  ───── */
    h1{font-size:12em;margin:.2em 0}
    .cap-line{font-size:2em;margin:.2em}
    .est-line{font-size:1.6em;margin:.2em;font-weight:bold;color:#0f0}
    .spacer{height:30px}

    /* ─────  chart card  ───── */
    .chart{
      margin-top:40px;
      width:90%;
      max-width:1000px;
      height:500px;               /* ← fixed height; no more runaway blank space */
      background:#fff;
      padding:20px;
      border-radius:8px;
      box-sizing:border-box;
    }
    /* let Chart.js fill the parent’s height */
    #marketCapChart{width:100%!important;height:100%!important;display:block}

    /* ─────  misc  ───── */
    .btn-share{
      margin-top:30px;padding:14px 28px;
      background:#000;color:#fff;border:none;border-radius:6px;font-size:1.2em;cursor:pointer
    }
    .btn-share:hover{background:#222}
    .logos{margin-top:20px;display:flex;justify-content:center;flex-wrap:wrap}
    .logos img{height:240px;margin:20px;border-radius:6px}
  </style>
</head>

<body>
  <h1>SOL&gt;ETH FLIPPENING</h1>

  <div class="cap-line" id="solanaCap">Solana Market Cap: $LOADING…</div>
  <div class="cap-line" id="ethereumCap">Ethereum Market Cap: $LOADING…</div>
  <div class="est-line" id="estPrice">$SOL Price at $ETH's Market Cap: $LOADING…</div>

  <div class="spacer"></div>

  <img src="assets/sol2.png" alt="Solana logo" style="height:300px;border-radius:8px">

  <div class="chart">
    <h2 style="color:#000;font-size:2em;font-weight:bold">SOL &gt; ETH FLIPPENING</h2>
    <canvas id="marketCapChart"></canvas>
  </div>

  <div class="logos">
    <img src="assets/sol3.jpg" alt="Solana logo">
    <img src="assets/sol4.png" alt="Solana logo">
  </div>

  <button class="btn-share" onclick="shareOnTwitter()">
    Tweet about SOL/ETH Flippening here
  </button>

<script>
/* ─────────────────────────────  utilities  ───────────────────────────── */
const $ = id => document.getElementById(id);
const fetchJSON = url => fetch(url).then(r=>{
  if(!r.ok) throw new Error(`${url} → ${r.status}`);
  return r.json();
});

/* ─────────────────────────────  headline stats  ─────────────────────── */
async function updateCaps(){
  const [sol, eth] = await Promise.all([
    fetchJSON('https://api.coingecko.com/api/v3/coins/solana?localization=false'),
    fetchJSON('https://api.coingecko.com/api/v3/coins/ethereum?localization=false')
  ]);

  const solCap = sol.market_data.market_cap.usd;
  const ethCap = eth.market_data.market_cap.usd;

  $('solanaCap').textContent  = `Solana Market Cap: $${solCap.toLocaleString()}`;
  $('ethereumCap').textContent = `Ethereum Market Cap: $${ethCap.toLocaleString()}`;

  const estPrice = ethCap / sol.market_data.circulating_supply;
  $('estPrice').textContent =
    `$SOL Price at $ETH's Market Cap: $${estPrice.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}`;
}

/* ─────────────────────────────  share  ──────────────────────────────── */
function shareOnTwitter(){
  const url  = encodeURIComponent(location.href);
  const text = encodeURIComponent('Track the $SOL > $ETH flippening with real-time charts and stats.');
  window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`,'_blank');
}

/* ─────────────────────────────  chart  ──────────────────────────────── */
async function drawChart(){
  const [solHist, ethHist] = await Promise.all([
    fetchJSON('https://api.coingecko.com/api/v3/coins/solana/market_chart?vs_currency=usd&days=90&interval=daily'),
    fetchJSON('https://api.coingecko.com/api/v3/coins/ethereum/market_chart?vs_currency=usd&days=90&interval=daily')
  ]);

  /* line the two assets up by timestamp so missing days don’t crash us */
  const ethMap = new Map(ethHist.market_caps.map(([t,c]) => [t,c]));
  const labels = [], ratios = [];

  solHist.market_caps.forEach(([t,solCap])=>{
    const ethCap = ethMap.get(t);
    if(ethCap){
      labels.push(new Date(t).toLocaleDateString());
      ratios.push(solCap / ethCap);
    }
  });

  new Chart($('marketCapChart').getContext('2d'),{
    type:'line',
    data:{
      labels,
      datasets:[
        {
          label:'SOL / ETH market-cap ratio',
          data:ratios,
          borderColor:'#14F195',
          borderWidth:3,
          tension:0.3,
          pointRadius:2
        },{
          label:'Flippening ( = 1 )',
          data:Array(ratios.length).fill(1),
          borderColor:'#9945FF',
          borderWidth:2,
          borderDash:[8,4],
          pointRadius:0
        }
      ]
    },
    options:{
      responsive:true,
      aspectRatio:2.4,            /* width ÷ height, keeps the card tidy */
      plugins:{
        legend:{labels:{font:{size:14},color:'#000'}}
      },
      scales:{
        y:{min:0,max:1.1,title:{display:true,text:'Ratio (SOL / ETH)',font:{size:16}}},
        x:{title:{display:true,text:'Date',font:{size:16}}}
      }
    }
  });
}

/* ─────────────────────────────  kick things off  ───────────────────── */
(async ()=>{
  await Promise.all([updateCaps(), drawChart()]);
})();
</script>
</body>
</html>
